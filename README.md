# 森林管理 GIS アプリ

山間部でのオフライン利用を想定した森林管理用モバイルアプリケーションです。

## 概要

本プロジェクトは **Supabase** をバックエンドに採用した **Flutter** モバイルアプリケーションです。電波の届かないエリアでも機能する「オフラインファースト」設計を採用しています。

### 主な機能
*   **オフラインファースト**: ローカルデータベース (Drift/SQLite) を使用し、通信回復時にバックグラウンドで Supabase と同期します。
*   **地図表示**: `flutter_map` を使用し、OpenStreetMap または国土地理院地図を表示します。
*   **GIS 機能**: PostGIS を活用して森林エリア (ポリゴン) や樹木の位置 (ポイント) を管理します。
*   **クロスプラットフォーム**: Android と iOS に対応した単一のコードベースです。

## 技術スタック

### フロントエンド (モバイルアプリ)
*   **フレームワーク**: Flutter (Dart)
*   **状態管理**: Riverpod
*   **地図ライブラリ**: flutter_map
*   **ローカルデータベース**: SQLite (Drift)

### バックエンド & データベース
*   **プラットフォーム**: Supabase
*   **データベース**: PostgreSQL
*   **拡張機能**: PostGIS (空間データに必須)
*   **認証**: Supabase Auth

## プロジェクト構成

*   `lib/`: Flutter アプリケーションのメインコード
    *   `features/`: 機能ごとの構成 (例: `map`, `trees`, `auth`)
    *   `core/`: 共通ユーティリティや設定
*   `supabase/`: Supabase の設定と SQL マイグレーションファイル

## 将来の拡張 (Future Extensions)

本プロジェクトは以下の機能拡張を想定して設計されています：

1.  **Webブラウザ版の対応**
    *   Flutter Web を利用し、PCブラウザからも管理画面としてアクセス可能にします。
2.  **Google Maps / Google Earth (3D) の統合**
    *   より詳細な衛星画像や、3D地形表示による直感的な状況把握を実現します。
3.  **AIによる資源量推定**
    *   衛星画像やドローン写真、現地で撮影した樹木写真をAI解析し、材積や炭素固定量を自動推定する機能を実装予定です。

## 始め方

### 前提条件
*   Flutter SDK
*   Android Studio / Android Emulator (または実機)
*   Supabase アカウント

### セットアップ
1.  リポジトリをクローンします。
2.  依存関係をインストールします:
    ```bash
    flutter pub get
    ```
3.  アプリを実行します:
    ```bash
    flutter run
    ```
